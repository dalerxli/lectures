%%
%% Common directives for all texts
%%
\documentclass[14pt,a4paper]{extbook} 
\usepackage{anysize}
\pagestyle{myheadings}
\marginsize{2cm}{2cm}{2cm}{1cm}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}

\usepackage{chapterbib}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{imakeidx}

\usepackage{ifpdf}
\ifpdf
  \usepackage[pdftex]{graphicx}
\else
  \usepackage[dvips]{graphicx}
\fi
\usepackage{tikz}

\ifpdf
  \usepackage{hyperref}
  \hypersetup{
    pdftex,
    allcolors=blue,
    bookmarksnumbered=true,     
    bookmarksopen=true,         
    bookmarksopenlevel=1,       
    colorlinks=true,            
    pdfstartview=Fit,           
    pdfpagemode=UseOutlines,  
    pdfpagelayout=TwoPageRight
  }
\else
  \usepackage[breaklinks]{hyperref}
\fi

\floatname{algorithm}{Алгоритм}

\usepackage{longtable}
\usepackage{indentfirst}
\renewcommand\thepart{\arabic{part}}

%
% https://tex.stackexchange.com/questions/187388/amsthm-with-shared-counters-messes-up-autoref-references
%
\usepackage{aliascnt}
\usepackage{cleveref}


\theoremstyle{theorem}
\newtheorem{xtheorem}{Теорема}[section]
\providecommand*{\xtheoremautorefname}{Теорема}
\NewDocumentEnvironment{theorem}{oo}
                       {\IfNoValueTF{#1}
                         % no optional argument to theorem
                         {\begin{xtheorem}}
                         {\begin{xtheorem}[#1]\index{#1!определение}}
                       }%
                       {\end{xtheorem}}


\newtheorem{lemma}[xtheorem]{Лемма}
\newtheorem{proposition}[xtheorem]{Предложение}
\newtheorem{corollary}[xtheorem]{Вывод}
\newtheorem{example}{Пример}[section]
\newtheorem{axiom}{Аксиома}[section]
\newtheorem{remark}{Комментарий}[section]

\newenvironment{definition}[1][Определение]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}
